<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Chromosome Visualization</title>
    
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/pygment_trac.css">

      <link rel="stylesheet" href="css/cyto-chromosome.style.css">
      <script src="js/cyto-chromosome.js"></script>

    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
      <script src="js/jquery-2.1.3.min.js"></script>
      <script>
          $(function () {
              var Chromosome = require('Chromosome');
              new Chromosome({
                  segment: "13",
                  target: "#chr13",
                  width: 1000,
                  includeAxis: true
              }).draw();

              var cx = new Chromosome({
                  segment: "X",
                  target: "#chrx",
                  width: 1000,
                  relativeSize: true,
                  includeAxis: true,
                  selectionMode: "multi"
              }).draw();

              cx.on('modelLoaded', function(e){
                  $("#xdes").text("event: modelLoaded");

              });

              cx.on('bandSelection', function(e){
                  $("#xdes").text("event: bandSelection");
                  $("#xstart").text("start: " + e.start);
                  $("#xend").text("end: " + e.end);

              });

              cx.on('selectionChanged', function(e){
                  $("#xdes").text("event: selectionChanged");
                  $("#xstart").text("start: " + e.start);
                  $("#xend").text("end: " + e.end);

              });

              $("#rs-btn").click(function(){
                  cx.deleteSelectors();
              });



          });
      </script>
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>cyto-chromosome-vis</h1>
        <p>Interactive Chromosome visualization using D3.js</p>
        <p class="view"><a href="https://github.com/linjoey/cyto-chromosome-vis">View the Project on GitHub <small>linjoey/cyto-chromosome-vis</small></a></p>
          <strong>ZIP File</strong> <a href="https://github.com/linjoey/cyto-chromosome-vis/zipball/master">Download </a>
          <hr/>
      </header>
      <section>
          <h2>Demo</h2>

          <h4>Chromosome 13 </h4>
          <svg id="chr13"></svg>

          <h4>Chromosome X </h4>

          <p >Selection Mode: multi (use shift)</p>
          <button id="rs-btn">Reset Selectors</button>
          <p id="xdes"></p>
          <p id="xstart">start: </p>
          <p id="xend">end: </p>
          <svg id="chrx"></svg>

          <p>This project uses D3.js to visualize chromosome bands using svg rect. The annotations are retrieved remotely from a specified DAS source. </p>
          <h4>Features</h4>
          <ul>
              <li>Dynamic selection modes: none, single, and multiple</li>
              <li>js events with coordinate information on band click and selector update</li>
              <li>Optional axis indicating approximate location</li>
          </ul>

          <h2>Usage</h2>
          <p>In the html file, include a single svg container</p>
          <pre><code>&lt;svg id="chr13"&gt;&lt;&#47;svg&gt;</code></pre>

          <p>Then add the following in a js file:</p>

          <pre><code>
var Chromosome = require('Chromosome');
var ch13 = new Chromosome({
    segment: "13",
    target: "#chr13",
    width: 1000
}).draw();
          </code></pre>


        <p>The constructor to Chromosome takes a options argument.
        <table>
          <tbody><tr>
            <th>Option</th><th>Required</th><th>Description</th>
          </tr>
          <tr>
            <td>segment</td><td>Required</td><td>The chromosome number to display, e.g "13"</td>
          </tr>
          <tr>
            <td>target</td><td>Required</td><td>The svg container, e.g "#chr13" </td>
          </tr>
          <tr>
              <td>width</td><td>Optional</td><td>Default: 900. The width to draw the svg container.  </td>
          </tr>
          <tr>
              <td>height</td><td>Optional</td><td>Default: 20. The height to draw the chromosome.  </td>
          </tr>
          <tr>
              <td>includeAxis</td><td>Optional</td><td>Default: false. Include an axis below the chromosome.  </td>
          </tr>
          <tr>
              <td>relativeSize</td><td>Optional</td><td>Default: false. Size the chromosome relative to chromosome 1.  </td>
          </tr>
          <tr>
              <td>selectionMode</td><td>Optional</td><td>"none", "single", or "multi". For multiple selection, press down shift while selecting.</td>
          </tr>
        </tbody></table>

          <h2>API</h2>
          <h4>Chromosome(opts)</h4>
          <p>Constructor for instantiating a single chromosome visualization</p>

          <h4>draw()</h4>
          <p>Apply the d3 DOM manipulations to the svg container</p>

          <h4>info()</h4>
          <p>Returns the options object</p>

          <h4>getCoordsByBand(band)</h4>
          <p>Returns base coordinates by band location</p>

          <h4>getCurrentSelections()</h4>
          <p>Return array of [start, end] coordinates for each selector</p>

          <h4>deleteSelectors()</h4>
          <p>Deletes all current selectors</p>

          <h2>Events</h2>

          <p>The following events are triggered: </p>
          <ul>
              <li>modelLoaded</li>
              <li>bandSelection</li>
              <li>selectionChanged</li>

          </ul>

          <pre><code>
cx.on('selectionChanged', function(e){
    //here e contains selected info such as start and end coordinates

});
          </code></pre>






      </section>
      <footer>
          <hr/>
        <p>This project is maintained by <a href="http://github.com/linjoey">Joe Lin</a></p>

      </footer>
    </div>
    <script src="js/scale.fix.js"></script>
  </body>
</html>